<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dark Horn Profile</title>
  <style>
    /* Global background menggunakan file background/background.png */
    body {
      font-family: 'Segoe UI', sans-serif;
      background: url('https://raw.githubusercontent.com/ScarilyId/Darkhorn/main/background/background.png') no-repeat center center fixed;
      background-size: cover;
      color: #fff;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(0, 0, 0, 0.8);
      padding: 10px 20px;
      animation: fadeInDown 1s ease;
    }
    header img#logo {
      width: 70px;
      height: 70px;
      object-fit: cover;
      border-radius: 50%;
      border: 2px solid #fff;
      transition: transform 0.3s;
    }
    header img#logo:hover {
      transform: scale(1.1);
    }
    header h1 {
      font-size: 1.8rem;
      padding: 10px 20px;
      border-radius: 8px;
      background: rgba(0, 0, 255, 0.3);
      backdrop-filter: blur(5px);
    }
    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    nav {
      background: rgba(17, 17, 17, 0.9);
      padding: 10px 20px;
      display: flex;
      justify-content: center;
      gap: 15px;
      animation: fadeIn 1s ease;
    }
    nav a {
      color: #fff;
      text-decoration: none;
      padding: 8px 12px;
      border-radius: 4px;
      transition: background 0.3s;
    }
    nav a:hover {
      background: #ff9800;
      color: #000;
    }
    /* Hero Section dengan banner/banner.png; di mobile tinggi dikurangi */
    .hero {
      position: relative;
      background: url('https://raw.githubusercontent.com/ScarilyId/Darkhorn/main/banner/banner.png') center/cover no-repeat;
      height: 300px;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: fadeIn 1.5s ease;
    }
    .hero h2 {
      font-size: 2.5rem;
      padding: 20px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 10px;
      z-index: 1;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .container {
      max-width: 1200px;
      margin: 20px auto;
      padding: 0 20px;
    }
    /* Gallery Section */
    .gallery {
      margin-top: 20px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      animation: popIn 1s ease;
    }
    @keyframes popIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }
    .gallery-item {
      border-radius: 10px;
      overflow: hidden;
      transition: transform 0.3s;
    }
    .gallery-item:hover {
      transform: scale(1.02);
    }
    .gallery-item img,
    .gallery-item video,
    .gallery-item iframe {
      width: 100%;
      display: block;
    }
    /* About Us Section */
    .about {
      margin-top: 40px;
      background: rgba(0, 0, 0, 0.7);
      padding: 20px;
      border-radius: 8px;
      animation: fadeIn 1s ease;
    }
    .about h2 {
      text-align: center;
      margin-bottom: 15px;
    }
    .about p {
      text-align: justify;
      line-height: 1.5;
    }
    /* Member List Section */
    .member-list {
      margin-top: 40px;
      animation: fadeIn 1s ease;
    }
    .member-list h2 {
      text-align: center;
      margin-bottom: 20px;
      font-size: 1.8rem;
    }
    .member-list ul {
      list-style: none;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
    }
    .member-list li {
      background: #333;
      padding: 10px 20px;
      border-radius: 20px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .member-list li:hover {
      background: #ff9800;
      color: #000;
    }
    /* Recruitment Section */
    .recruitment {
      margin-top: 40px;
      text-align: center;
      animation: fadeIn 1s ease;
    }
    .recruitment button {
      padding: 12px 24px;
      font-size: 1.1rem;
      background: #ff9800;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .recruitment button:hover {
      background: #e68900;
    }
    /* Footer */
    footer {
      background: #000;
      text-align: center;
      padding: 20px;
      margin-top: 40px;
      animation: fadeInUp 1s ease;
    }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    /* Responsive Adjustments */
    @media (max-width: 600px) {
      header h1 {
        font-size: 1.5rem;
      }
      .hero {
        height: 200px;
      }
      .hero h2 {
        font-size: 1.8rem;
        padding: 10px;
      }
      nav {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <img id="logo" src="https://raw.githubusercontent.com/ScarilyId/Darkhorn/main/logo/logo.png" alt="Logo Dark Horn">
    <h1 id="siteName">Dark Horn</h1>
  </header>
  <!-- Navigasi -->
  <nav>
    <a href="index.html">Home</a>
    <a href="about.html">About Us</a>
    <a href="#recruitmentSection">Recruitment</a>
  </nav>
  <!-- Hero Section -->
  <div class="hero">
    <h2>Welcome to Dark Horn</h2>
  </div>
  <div class="container">
    <!-- Gallery Section -->
    <section class="gallery" id="galleryContainer">
      <p style="text-align:center;">Memuat gallery...</p>
    </section>
    <!-- About Us Section -->
    <section class="about" id="aboutSection">
      <h2>About Us</h2>
      <p>
        Dark Horn adalah komunitas kreatif yang menggabungkan dunia game, seni, dan teknologi.
        Kami menyediakan galeri media, 3D skin viewer untuk Minecraft, serta informasi rekrutmen
        yang selalu diperbarui. Bergabunglah dan eksplorasi kreativitas tanpa batas bersama kami.
      </p>
      <p>
        Kami selalu berinovasi dalam menyediakan pengalaman interaktif. Setiap elemen di sini dapat diperbarui secara real-time melalui panel administrasi.
      </p>
    </section>
    <!-- Member List Section -->
    <section class="member-list" id="memberContainer">
      <h2>List Member</h2>
      <ul id="memberList">
        <li>Memuat member list...</li>
      </ul>
    </section>
    <!-- Recruitment Section -->
    <section class="recruitment" id="recruitmentSection">
      <button id="recruitmentBtn">Lihat Recruitment</button>
    </section>
  </div>
  <!-- Modal untuk 3D Skin Viewer -->
  <div class="modal" id="skinModal">
    <div class="modal-content">
      <span class="modal-close" id="modalClose">&times;</span>
      <div id="skinViewer" style="width:100%; height:100%; min-width:300px; min-height:300px;">
        <p style="text-align:center; color:#ff9800;">Loading 3D Skin...</p>
      </div>
    </div>
  </div>
  <!-- Footer -->
  <footer>
    <p>&copy; 2025 Dark Horn. All rights reserved. Created by MohFahmiMc & ForcedCraft.</p>
  </footer>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script>
    const OWNER = "ScarilyId";
    const REPO = "Darkhorn";
    let skinsMapping = {};

    // Ambil gallery: gambar, video & link embed dari video_links.txt
    async function fetchGallery() {
      const galleryContainer = document.getElementById("galleryContainer");
      try {
        const response = await fetch(`https://api.github.com/repos/${OWNER}/${REPO}/contents/images`);
        if (!response.ok) {
          galleryContainer.innerHTML = "<p>Gagal memuat gallery.</p>";
          return;
        }
        const files = await response.json();
        let htmlContent = "";
        files.forEach(file => {
          if (file.type === "file") {
            if(file.name.match(/\.(jpg|jpeg|png|gif)$/i)) {
              htmlContent += `<div class="gallery-item"><img src="${file.download_url}" alt="${file.name}"></div>`;
            } else if(file.name.match(/\.(mp4|webm)$/i)) {
              htmlContent += `<div class="gallery-item"><video controls><source src="${file.download_url}" type="video/mp4">Browser tidak mendukung video.</video></div>`;
            }
          }
        });
        // Ambil juga link video dari video_links.txt
        const videoResponse = await fetch(`https://api.github.com/repos/${OWNER}/${REPO}/contents/video_links.txt`);
        if (videoResponse.ok) {
          const videoData = await videoResponse.json();
          const videoContent = atob(videoData.content);
          const videoLinks = videoContent.split("\n").filter(line => line.trim() !== "");
          videoLinks.forEach(link => {
            if(link.includes("tiktok.com")) {
              htmlContent += `<div class="gallery-item"><iframe src="${link}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`;
            } else {
              htmlContent += `<div class="gallery-item"><a href="${link}" target="_blank" style="display:block; padding:20px; background:#222; text-align:center; color:#ff9800;">${link}</a></div>`;
            }
          });
        }
        galleryContainer.innerHTML = htmlContent || "<p>Tidak ada konten gallery ditemukan.</p>";
      } catch (error) {
        console.error(error);
        galleryContainer.innerHTML = "<p>Error memuat gallery.</p>";
      }
    }

    // Ambil member list dari member_list.txt
    async function fetchMembers() {
      const memberList = document.getElementById("memberList");
      try {
        const response = await fetch(`https://api.github.com/repos/${OWNER}/${REPO}/contents/member_list.txt`);
        if (!response.ok) {
          memberList.innerHTML = "<li>Gagal memuat member list.</li>";
          return;
        }
        const data = await response.json();
        const content = atob(data.content);
        const members = content.split("\n").filter(line => line.trim() !== "");
        let listHtml = "";
        members.forEach(member => {
          listHtml += `<li onclick="openSkinViewer('${member.trim()}')">${member.trim()}</li>`;
        });
        memberList.innerHTML = listHtml || "<li>Tidak ada member ditemukan.</li>";
      } catch (error) {
        console.error(error);
        memberList.innerHTML = "<li>Error memuat member list.</li>";
      }
    }

    // Ambil logo
    async function fetchLogo() {
      try {
        const response = await fetch(`https://api.github.com/repos/${OWNER}/${REPO}/contents/logo/logo.png`);
        if(response.ok) {
          const data = await response.json();
          document.getElementById("logo").src = data.download_url;
        }
      } catch (error) {
        console.error(error);
      }
    }

    // Ambil recruitment link
    async function fetchRecruitment() {
      const recruitmentBtn = document.getElementById("recruitmentBtn");
      try {
        const response = await fetch(`https://api.github.com/repos/${OWNER}/${REPO}/contents/recruitment.txt`);
        if(response.ok) {
          const data = await response.json();
          const link = atob(data.content).trim();
          recruitmentBtn.onclick = () => { window.open(link, "_blank"); };
          recruitmentBtn.textContent = "Lihat Recruitment";
        } else {
          recruitmentBtn.style.display = "none";
        }
      } catch (error) {
        console.error(error);
      }
    }

    // Ambil mapping skin dari skins_list.txt
    async function fetchSkinsMapping() {
      try {
        const response = await fetch(`https://api.github.com/repos/${OWNER}/${REPO}/contents/skins_list.txt`);
        if(response.ok) {
          const data = await response.json();
          const content = atob(data.content);
          content.split("\n").forEach(line => {
            const parts = line.split(":");
            if(parts.length >= 2) {
              const name = parts[0].trim();
              const url = parts.slice(1).join(":").trim();
              if(name) { skinsMapping[name] = url; }
            }
          });
        }
      } catch (error) {
        console.error("Gagal memuat skins mapping:", error);
      }
    }

    // Buka modal skin viewer
    function openSkinViewer(memberName) {
      const modal = document.getElementById("skinModal");
      const viewerContainer = document.getElementById("skinViewer");
      const skinUrl = skinsMapping[memberName] || "https://raw.githubusercontent.com/ScarilyId/Darkhorn/main/skins/Steve.png";
      modal.style.display = "flex";
      viewerContainer.innerHTML = "";
      show3DSkin(skinUrl, viewerContainer);
    }

    // Fungsi render 3D skin menggunakan Three.js (menggunakan ukuran container dinamis)
    function show3DSkin(skinUrl, container) {
      // Pastikan container memiliki ukuran minimal
      const width = container.offsetWidth || 300;
      const height = container.offsetHeight || 300;
      while(container.firstChild) { container.removeChild(container.firstChild); }
      
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(45, width / height, 0.1, 1000);
      const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
      renderer.setSize(width, height);
      container.appendChild(renderer.domElement);
      
      const geometry = new THREE.BoxGeometry(2, 4, 1);
      const textureLoader = new THREE.TextureLoader();
      textureLoader.load(skinUrl, (texture) => {
        const material = new THREE.MeshBasicMaterial({ map: texture });
        const cube = new THREE.Mesh(geometry, material);
        scene.add(cube);
        camera.position.z = 6;
        function animate() {
          requestAnimationFrame(animate);
          cube.rotation.y += 0.01;
          renderer.render(scene, camera);
        }
        animate();
      }, undefined, (error) => {
        console.error("Texture load error:", error);
      });
    }

    // Modal close handler
    document.getElementById("modalClose").onclick = () => {
      document.getElementById("skinModal").style.display = "none";
    };
    window.onclick = (event) => {
      const modal = document.getElementById("skinModal");
      if(event.target === modal) { modal.style.display = "none"; }
    };

    // Panggil fungsi saat halaman dimuat
    fetchGallery();
    fetchMembers();
    fetchLogo();
    fetchRecruitment();
    fetchSkinsMapping();
  </script>
</body>
</html>
